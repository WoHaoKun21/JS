<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>焦点轮播图</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="../JS/public.js"></script>
    <script>
        $.addEvent(window,"load",function(){
            // 获取DOM对象
            var imgs=$.getId("img");
            var sapns=document.getElementsByTagName("span");
            var currentIndex;// 用来获取焦点被点击后得值

            // 点击按钮，按钮改变，图片随之改变
            for(var i=0;i<sapns.length;i++){// 循环绑定点击事件
                sapns[i].index=i;
                $.addEvent(sapns[i],"click",function(){// 当点击当前焦点的时候
                    for(var j=0;j<sapns.length;j++){// 循环内的所有焦点都变成未点击的样式
                        sapns[j].style.background="url(../img/dot.png)";// 相当于格式化了图片
                    }
                    this.style.background="url(../img/dotActive.png)";
                    currentIndex=this.index;// 让当前的索引值赋值给变量，在定时器里面进行判断使用
                    // 让图片发生改变
                    imgs.src="../img/"+(this.index+1)+".jpg";
                });
            }

            // 实现自动轮播：图片、按钮相应发生改变，并且从当前位置继续向下进行轮播
            var k=1;
            setInterval(() => {
                // 首先：还是按钮线改变
                for(var i=0;i<sapns.length;i++){
                    sapns[i].style.background="url(../img/dot.png)";// 清除所有样式到原始样式
                    if(currentIndex != undefined){// 上面的按钮被点击后，变量被赋值，在这里进行判断
                        k=currentIndex;
                        currentIndex=undefined;
                    }
                    sapns[k].style.background="url(../img/dotActive.png)";
                    imgs.src="../img/"+(k+1)+".jpg";// 当前图片的属性也随之发生变化
                    
                }
                // 这个if条件要脱离上面的循环，不然会直接变成最后一张图片
                if(k>=6){
                    k=-1;
                }
                k++;
            }, 3000);
        })
    </script>
</head>
<body>
    <div class="container">
        <!-- 图标 -->
        <div id="top">
            <img src="../img/1.jpg" id="img">
        </div>
        <!-- 按钮样式 -->
        <div id="focus">
            <span class="1" style="background: url(../img/dotActive.png);"></span>
            <span class="2"></span>
            <span class="3"></span>
            <span class="4"></span>
            <span class="5"></span>
            <span class="6"></span>
            <span class="7"></span>
        </div>
    </div>
</body>
</html>